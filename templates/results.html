{% extends "sub/base.html" %}
{% block title %}"{{result.term}}" results{% endblock %}
{% block description %}Search the NYT Spelling Bee clue archive for "{{result.term}}"{% endblock %}
{% block head %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SearchResultsPage",
  "name": "“{{ result.term | json_esc }}” results",
  "description": "Search results for “{{ result.term | json_esc }}” in the NYT Spelling Bee clue archive.",
  "url": "{{ request.url }}",
  "potentialAction": {
    "@type": "SearchAction",
    "target": "{{ domain }}/search?q={search_term_string}",
    "query-input": "required name=search_term_string"
  },
  "mainEntity": {
    "@type": "ItemList",
    "name": "Search results for “{{ result.term | json_esc }}”",
    "itemListElement": [
      {% for clue in result.results %}{
        "@type": "ListItem",
        "position": {{ loop.index }},
        "url": "{{ clue.url }}",
        "name": "{{ clue.text | json_esc }}"
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    ]
  }
}
</script>
{% endblock %}

{% block content %}
{% with pagination=result.pagination %}
<h1 class="text-4xl font-bold text-center mb-6">Search Results</h1>

{% if result.results %}

  {% if pagination.has_next or pagination.has_prev %}
    {% include 'sub/pagination_small.html' %}
    {% include 'sub/pagination_large.html' %}
  {% endif %}
  <div class="grid grid-cols-1 gap-6">
    {% for clue in result.results %}
    <div class="p-4 border border-gray-300 rounded-lg hover:shadow-lg transition">
      <a href="{{ clue.url }}" class="hover:underline">
        <p class="text-lg font-medium">{{ clue.text }}</p>
      </a>
      {% with word=clue.word %}
        {% include "sub/word_boxes.html" %}
      {% endwith %}
      <div class="text-sm italic text-gray-500 pt-2 text-right">{{ format_date(clue.lastused) }}</div>
      </div>
    {% endfor %}
  </div>
  {% include 'sub/pagination_small.html' %}
  {% include 'sub/pagination_large.html' %}
{% else %}
  <p class="text-gray-600 text-center">No results found for “{{ result.term }}”.</p>
{% endif %}

{% endwith %}
{% endblock %}
